---
title: Deployment Considerations
owner: London Services
---

## Considerations when deploying Redis on Pivotal Cloud Foundry

### AZ's and Networks
We recommend deploying Redis for PCF to a different network than that used by your Elastic Runtime and any other services deployed by Ops Manager.

Assigning multiple AZs to Redis jobs will not guarantee high availability (See Installing Redis for more details). Once your AZs are set they cannot be changed.

### Security
To allow this service to have network access you must create [Application Security Groups (ASGs)](http://docs.pivotal.io/pivotalcf/1-7/adminguide/app-sec-groups.html). Ensure your security group allows access to the Redis Service Broker VM and Dedicated VMs configured in your deployment. You can obtain the IP addresses for these VMs in Ops Manager under the <strong>Resource Config</strong> section for the Redis tile.</p>

Redis for Pivotal Cloud Foundry is compatible with the Pivotal IPsec add-on. Information on how to set up Pivotal IPsec can be found [here](http://docs.pivotal.io/addon-ipsec/index.html)

<p class="note"><strong>Note</strong>: Without ASGs, this service will not be usable.</p>

### Resource Footprint

The following table shows the resource and IP requirements for installing the tile. Where the resource is configurable you can also see the minimum requirements:
<table border="1" class="nice">
	<tr>
		<th>Resource</th>
		<th>Instances</th>
		<th>CPU</th>
		<th>RAM</th>
		<th>Ephemeral</th>
		<th>Persistent</th>
	</tr>
	<tr>
	 	<td>Redis Broker</td>
	 	<td>1 </td>
	 	<td>2 <br />Min: 1</td>
	 	<td>3072 <br />Min: 1024</td>
	 	<td>4096 <br />Min: 1024</td>
	 	<td>9216 <br />Min: 1024</td>
 	</tr>
  <tr>
	 	<td>Dedicated Node</td>
	 	<td>5 <br />Min: 1</td>
	 	<td>2 <br />Min: 1</td>
	 	<td>1024 <br />Min: 1024</td>
	 	<td>4096 <br />Min: 1024</td>
	 	<td>4096 <br />Min: 1024</td>
 	</tr>
  <tr>
	 	<td>Broker Registrar</td>
	 	<td>1 </td>
	 	<td>1</td>
	 	<td>1024</td>
	 	<td>2048</td>
	 	<td>0</td>
 	</tr>
  <tr>
    <td>Broker deregistrar</td>
    <td>1 </td>
    <td>1</td>
    <td>1024</td>
    <td>2048</td>
    <td>0</td>
  </tr>
  <tr>
	 	<td>Smoke Tests</td>
	 	<td>1 </td>
	 	<td>1</td>
	 	<td>1024</td>
	 	<td>2048</td>
	 	<td>0</td>
 	</tr>
</table>

The default resources assigned to Redis for PCF are the minimum required. Operators should calculate anticipated resources and size VMs and disk accordingly.  Once VM and disk size has been set it can be increased but not decreased.

### Resource Usage
During installation of Redis, 2 VMs will be created to perform the `broker-registrar` and `smoke-tests` errands. During the Smoke Test errand, an example application will be bound to the PCF deployment in a newly created org `redis-smoke-test-org` and space `redis-smoke-test-space`. After the Smoke Tests and Broker Registrar errands are complete the VMs, example app and orgs will be deleted.

After the installation of Redis there will be a `cf-redis-broker` VM that the Redis Broker lives on and multiple `dedicated-node` VMs depending on your configuration for instance limit of Dedicated Nodes.

#### Notes:
* Shared VM instances run on the Redis Broker.
* When configuring your persistent disk size for the Redis Broker and Dedicated Nodes ensure it is at least twice the size of the allocated RAM. e.g. If the RAM size is 4096 the peristent disk size should be at least 9192.
